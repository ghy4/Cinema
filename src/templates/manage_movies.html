{% extends 'base.html' %}
{% block title %}Manage Movies{% endblock %}
{% block content %}
<h2>Manage Movies</h2>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Genre</th>
            <th>Duration</th>
            <th>Poster</th>
            <th>Release Date</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for movie in movies %}
        <tr class="movie-row">
            <td class="p-12-10">{{ movie.id }}</td>
            <td class="p-12-10">{{ movie.title }}</td>
            <td class="p-12-10">{{ movie.genre }}</td>
            <td class="p-12-10">{{ movie.duration }}</td>
            <td class="p-12-10"><img src="{{ movie.poster_url }}" alt="{{ movie.title }} poster" style="width: 80px; height: 120px; object-fit: cover; display: block; margin: 0 auto;" /></td>
            <td class="p-12-10">{{ movie.release_date }}</td>
            <td class="p-12-10" style="white-space:nowrap;">
                <div style="display: flex; flex-direction: column; align-items: stretch; gap: 8px;">
                    <form action="{{ url_for('admin.edit_movie', movie_id=movie.id) }}" method="get" style="display:block; margin:0;">
                        <button type="submit" style="width: 100%;">Edit</button>
                    </form>
                    <form action="{{ url_for('admin.delete_movie', movie_id=movie.id) }}" method="post" style="display:block; margin:0;">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this movie?');" style="width: 100%;">Delete</button>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<a href="{{ url_for('admin.add_movie') }}" style="display:inline-block; margin-top: 24px; padding: 10px 18px; background: #e50914; color: #fff; border-radius: 5px; text-decoration: none; font-weight: bold;">Add New Movie</a>
{% endblock %}
